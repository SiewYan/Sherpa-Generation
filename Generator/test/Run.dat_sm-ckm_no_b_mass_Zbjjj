(run){
  # general settings
  EVENTS 100;

  # me generator setup
  # Amegic
  #ME_SIGNAL_GENERATOR Comix Amegic LOOPGEN;
  ME_SIGNAL_GENERATOR  Comix; #LOOPGEN;
  EVENT_GENERATION_MODE Unweighted;
  #EVENT_GENERATION_MODE PartiallyUnweighted;
  #LOOPGEN:=OpenLoops;
  SCALES VAR{Abs2(p[0]+p[1])};
  
  # model setup
  MODEL sm;

  # tags for process setup
  # NJET = the maximal number of extra jets
  # LJET = the multiplicity of the MC@NLO subprocesses, exp: LJET = 2,3 means X+jj and X+jjj will be produced NLO
  # QCUT = the merging cut
  NJET:=0; LJET:=0; QCUT:=30;
  
  # uncomment to disable underlying event simulation:
  # MI_HANDLER None; #Or Amisic

  # uncomment to disable hadronization:
  # FRAGMENTATION Off; #Or Ahadic

  # uncomment to disable shower:
  # SHOWER_GENERATOR None; #Or Dire, CSS

  # LHC beam setup:
  BEAM_1 2212; BEAM_ENERGY_1 6500;
  BEAM_2 2212; BEAM_ENERGY_2 6500;

  # LHAPDF
  PDF_LIBRARY = LHAPDFSherpa;
  PDF_SET = NNPDF30_lo_as_0130; #263000

  # the bottom quark is treated masslessly by default, a five flavour calculation is performed
  PARTICLE_CONTAINER 900 bottom 5 -5;
  PARTICLE_CONTAINER 901 lightflavs 1 -1 2 -2 3 -3 4 -4 21 5 -5;
  #NLO_CSS_DISALLOW_FLAVOUR 5;
  
  # 15000.0       =  bwcutoff       ! (M+/-bwcutoff*Gamma)	
  # https://cp3.irmp.ucl.ac.be/projects/madgraph/wiki/FAQ-Cards-2
  # With the default HARD_MASS_SMEARING= the kinematic mass of the unstable propagator is distributed according to a Breit-Wigner shape a posteriori.
  # All matrix elements are still calculated in the narrow-width approximation with onshell particles. Only the kinematics are affected.
  # To keep all intermediate particles onshell HARD_MASS_SMEARING=0

  # Hard decay
  # particle properties (ME widths need to be zero if external)
  #HARD_DECAYS : This decay module can also be used on top of NLO matrix elements, but it does not include any NLO corrections in the decay matrix elements themselves. 
  #HARD_DECAYS 1; #HARD_MASS_SMEARING 0;
  #WIDTH[23] 0;
  ## disable higgs -> neu neu
  #HDH_STATUS[23,12,-12] 1;
  #HDH_STATUS[23,14,-14] 1;
  #HDH_STATUS[23,16,-16] 1;

}(run)

(processes){
  Process 901 901 -> 23[a] 900 901{NJET}
  DecayOS 23[a] -> 91 91
  #Order (*,0); #This ensures that all final state jets are produced via the strong interaction. 
  CKKW sqr(QCUT/E_CMS);
  NLO_QCD_Mode MC@NLO {LJET};
  ME_Generator Comix {LJET};
  RS_ME_Generator Comix {LJET};
  #Loop_Generator LOOPGEN {LJET};

  Integration_Error 0.02 {4};
  Integration_Error 0.02 {5};
  Integration_Error 0.05 {6};
  Integration_Error 0.08 {7};
  Integration_Error 0.10 {8};

  End process;
}(processes)

(selector){
  # phase space cuts for matrix elements

  FastjetFinder antikt 1 5 0 0.4 0.75 5 100 1; #FastjetFinder <algorithm> <n> <ptmin> <etmin> <dr> [<f(siscone)>=0.75] [<eta-max>] [<y-max>] [<nb>] [<nb2>]	
  #The transverse momentum of v in GeV.
  "Calc( PPerp([0]) + PPerp([1]) )" 91,91 200,E_CMS
  #Decay2(PPerp) 12 -12 200 500
  #Decay('PPerp(p[0]+p[1])') 14 -14 200 -1
  #Decay('PPerp(p[0]+p[1])') 16 -16 200 -1

}(selector)

(ufo){
block wolfenstein
	1  0.2253        # lamWS
	2  0.808         # AWS
	3  0.132         # rhoWS
	4  0.341         # etaWS

block mass
	23 91.188        # MZ
	4  0.            # MC
	6  173.0         # MT
	5  0.            # MB
	25 125.0         # MH
	11 0.            # Me
	13 0.            # MM
	15 1.777         # MTA

block sminputs
	1  132.50698     # aEWM1
	2  1.16639e-05   # Gf
	3  0.118         # aS

block yukawa
	4  0.            # ymc
	5  0.            # ymb
	6  173.0         # ymt
	11 0.            # yme
	13 0.            # ymm
	15 1.777         # ymtau

decay 	23 2.44140351    # WZ
decay 	24 2.04759951    # WW
decay 	6  1.491500      # WT
decay 	25 0.00638233934 # WH
decay 	15 2.27e-12      # WTau

}(ufo)

